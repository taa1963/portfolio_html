<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>расчет коммерческого предложения</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">
  <style type="text/css">
  	.string {
  		color: #aaa;
  		background: #444;
  		border: 1px #aaa solid;
  	}
  	select, input {
  		outline: 0;
  		margin: .5em;
  		padding: 1em;
  		color: #444;
  		border: 1px #bac solid;
  		border-radius: .4em;
  		min-width: 10em;
  	}
  	input:hover {
  		/*border: 1px #cfa solid;*/
  	}
  	input:focus {
  		border: 1px #fa0 solid;
  	}
  	input.comment {
  		width: 28em;
  	}
  	label, input[type="checkbox"] {
  		padding: 0; margin: 0;
  	}
  	input[type="submit"] {
  		background: #fb2;
  		color: #fff;
  		cursor: pointer;
		border: .2em #fff solid;
  	}
  	.cu_pk {
  		display: inline-block; width: 5em; text-align: center;
  	}
  	.cu_pk_box {
  	}
  	tr {
  		/*background: #aaa; */
  	}
  	.one_block:nth-child(2n) {
  		background: #fff;
  		box-shadow: none;
  	}
  	.one_block {
  		background: #eee;
  		margin: .4em;
  		/*border: 1px #888 solid;
  		*/
  		border-radius: .4em;
  		box-shadow: 1px 3px rgba(100,100,100,.4);

  	}
	.type_dev{
		display: block;
	}

    .type_s{
        display: block;
        width: 100%;
        height: auto;
    }
    .type_v{
        display: block;
        width: 80%;
        margin: 0 auto;
    }
    .text_pop{
        text-align: center;
        color: #444444;
    }

    .form11{
        display: block;
        position: relative;
        overflow: hidden;
        width: 100%;
        height: auto;
    }
    .form11 h2{
        color: #000000;
        text-align: center;
    }

    .texta{
        display: block;
        margin: 0 auto;
        width: 95%;
    }

    /*//==================================//  */

    /*
* Оформление контактной формы
* без дополительных изображений;
* исключительно средствами CSS;
*/

    /*--Слой затемнения фона--*/
    #fade {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
        display: none; /*--по умолчанию скрыт--*/
        width: 100%;
        height: 100%;
        background: #000;
        opacity: .70;/* Полупрозрачность слоя затемнения */
        filter:progid:DXImageTransform.Microsoft.Alpha(opacity=70);
    }
    /*--Модальное окно--*/
    .popup_block{
        position: fixed;
        top: 55%;;
        left: 45%;
        z-index: 99999;
        display: none; /*--по умолчанию скрыт--*/
        float: left;
        -webkit-box-sizing: content-box;
        -moz-box-sizing: content-box;
        box-sizing: content-box;
        background-color: #ffffff;
        max-height: 100%;

        /*-- скругленные углы--*/

        color: #ffffff;
        font-size: .9em;
    }
    /*--Фиксированное позиционирование для тупого IE6--*/
    *html #fade {
        position: absolute;
    }
    *html .popup_block {
        position: absolute;
    }
    /*--Блок содержания--*/
    .note{
        display: block;
        overflow: hidden;
        /* устанавливаем необходимую ширину формы в зависимости от дизайна
       ** форма отлично растягивается */
        width: 100%;
        background: none repeat scroll 0 0 #FFFFFF;


    }

    .note p{
        font: 16px "DroidSerifRegular";
        color: #4b4b4b;
        margin-top: 20px;
        text-align: center;
        /*//width: 85%;*/
    }


    /* формируем кнопку закрытия */
    .close {
        position: absolute;
        top: -18px;
        right: -18px;
        width: 24px;
        height: 24px;
        border: 2px solid #ccc;
        -webkit-border-radius: 15px;
        -moz-border-radius: 15px;
        -ms-border-radius: 15px;
        -o-border-radius: 15px;
        border-radius: 15px;
        background-color: rgba(61, 61, 61, 0.8);
        -webkit-box-shadow: 0px 0px 10px #000;
        -moz-box-shadow: 0px 0px 10px #000;
        box-shadow: 0px 0px 10px #000;
        text-align: center;
        text-decoration: none;
        font-weight: bold;
        line-height: 20px;
        -webkit-transition: all ease .8s;
        -moz-transition: all ease .8s;
        -ms-transition: all ease .8s;
        -o-transition: all ease .8s;
        transition: all ease .8s;
    }
    .close:before {
        color: rgba(255, 255, 255, 0.9);
        content: "X";
        text-shadow: 0 -1px rgba(0, 0, 0, 0.9);
        font-size: 12px;
    }
    .close:hover {
        background-color: rgba(252, 20, 0, 0.8);
        /*--крутим кнопку при наведении--*/
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        transform: rotate(360deg);
    }



    /* конец формы */


  </style>
</head>
<body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>


<!--<link href="js/modal-contact.css" rel="stylesheet" />-->


<!--<script src="js/dm-modal.js" ></script>-->



<p>
	<h2>Оснастите свою лабораторию по последнему слову техники!</h2>
</p>
<p>
	Специалисты нашей компании предоставляют грамотную экспертизу в подборе лабораторного оборудования. Мы подбираем оптимальные решения по соотношениям цена/ качество и комплектация/ производительность в зависимости от бюджета Заказчика.
</p>
<p>
	Выберите оборудования и заполните технически параметры. Мы выполним расчеты и отправим вам КП.
</p>

<div class="one_block" id="one_block_example" style="display: none;">
	<table class="one_block2">
		<tr>
			<th>Устройство</th>
			<th>Реестр СИ РК</th>
			<th>Новый</th>
			<th>Комментарий</th>
			<th>Действие</th>
		</tr>

		<tr>
			<td>
				<!--<input type="text" name="type_dev[]" placeholder=""   class="type_dev" />-->
				<select class="pname" data-type="type"  data-blockid="one_block" >
				</select>


			</td>
			<td>
				<input type="checkbox" name="chk_register" class="chk_register" checked=""/>
			</td>
			<td>
				<input type="checkbox" name="chk_new" class="chk_new" />
			</td>
			<td>
				<input type="text" placeholder="Комментарий"  class="comment" />
			</td>
			<td>
				<input type="submit" name="add" value="Добавить" data-blockid="one_block" data-add />
			</td>
			<td>
				<input type="submit" onclick="DelUvv(this);" name="del" value="Удалить" data-blockid="one_block" data-add />
			</td>
		</tr>
	</table>
	<table data-fields="fields">

	</table>
</div>


<!--<table class="one_block1">-->
    <!--<tr>-->
        <!--<th>Устройство</th>-->
        <!--<th>Реестр СИ РК</th>-->
        <!--<th>Новый</th>-->
        <!--<th>Комментарий</th>-->
        <!--<th>Действие</th>-->
    <!--</tr>-->

    <!--<tr>-->
        <!--<td>-->
            <!--<select name="type" data-type="type"  data-blockid="one_block">-->
            <!--</select>-->
        <!--</td>-->
        <!--<td>-->
            <!--<input type="checkbox" name="chk_register" id="chk_register" checked=""/>-->
        <!--</td>-->
        <!--<td>-->
            <!--<input type="checkbox" name="chk_new" id="chk_new" />-->
        <!--</td>-->
        <!--<td>-->
            <!--<input type="text" name="comment" placeholder="Комментарий"  class="comment" />-->
        <!--</td>-->
        <!--<td>-->
            <!--<input type="submit" name="add" value="Добавить" data-blockid="one_block" data-add />-->
        <!--</td>-->
        <!--<td>-->
            <!--<input type="submit" onclick="DelUvv(this);" name="del" value="Удалить" data-blockid="one_block" data-add />-->
        <!--</td>-->
    <!--</tr>-->
<!--</table>-->

<form id="form1" >

<div id="po5t">


    <span></span>

	<!-- script body -->
</div>



<p>
	 <!--Заполните ваши контактные данные. Мы вышлем вам расчет коммерческого предложения в трех вариантах!<br />-->
	 <!--<input required type="email" name="email" placeholder="user@mail.ru" />-->
      <!--<input required  type="text" name="phone" placeholder="+914007007" />-->


    <a href="#?w=700" rel="popup_contact2"  id="popu1">   <input type="submit" class="submit" name="submit" value="Расчитать КП" /></a>


</p>

</form>

<div id="popup_contact2" class="popup_block">

    <div class="note">

        <p>
            Заполните ваши контактные данные. Мы вышлем вам расчет коммерческого предложения в трех вариантах!<br />

        </p>


    </div>



    <form id="form11" class="form11" action="send.php" method="post">

        <h2> Выбраны следующие устройства </h2>

                         <!--<p class="text_pop">Тип устройства</p>-->
        <!--<input readonly  type="text" name="type_v_0" class="type_v" id="type_v_0" />-->
                        <!--<p class="text_pop">Комментарий к типу устройства</p>-->
        <!--<input readonly  type="text" name="type_com_0" class="type_v" id="type_com_0" />-->

                               <!--<p class="text_pop">Дополнительная опция</p>-->
        <!--<input readonly  type="text" name="type_opt_0" class="type_v" id="type_opt_0" />-->
                            <!--<p class="text_pop">Комментарий к дополнительной опции</p>-->
        <!--<input readonly  type="text" name="type_opt_com_0" class="type_v" id="type_opt_com_0" />-->


        <!--<input required  type="text" name="type_s" class="type_s" />-->

        <!--<span id="Zena"></span>-->
        <textarea rows="20" class="texta" id="texta" name="result"></textarea>

        <input required type="email" name="email" placeholder="user@mail.ru" />
        <input required  type="text" name="phone" placeholder="+914007007" />

        <input type="submit" class="submit" name="submit" value="Отправить КП" />


        </form >




</div>


<script type="text/javascript">
    var names,str;
    names='';
    str='';

	const CUSTOM_VARIANT = "Свой вариант";




    var detectors = [
        {
            name: "Выберите оборудование"

        },
		{
			name: "Хроматограф газовый",
			fields: [
				{
					name: "Вид детектора",
					types: [
						"Пламенно-ионизационный детектор – ПИД (FID)",
						"Детектор по теплопроводности или катарометр (TCD) ",
						"Микро-электронозахватный детектор, микро-ДЭЗ",
						"Термоионный или детектор на азот и фосфор (NPD)",
						"Пламенно-фотометрические детекторы ПФД (FPD и DFPD)",
						"Хемилюминесцентные детектор",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Хроматограф жидкостной",
			fields: [
				{
					name: "Вид детектора",
					types: [
						"Диодно-матричный детектор",
						"Флуоресцентный детектор",
						"Рефрактометрический детектор",
						"Кондуктометрический детектор",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Спектрометры",
			fields: [
				{
					name: "Название прибора",
					types: [
						"Атомно-абсорбционные спектрометры",
						"УФ-ВИД спектрофотометры",
						"ИК-ФУРЬЕ спектрометры",
						"АЭС МП спектрометры",
						"ИСП-МС спектрометры",
						"ИСП-ОЭС спектрометры",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Весы",
			fields: [
				{
					name: "Дискретность",
					types: [
						"0,1",
						"0,01",
						"0,001",
						"0,0001",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Наибольший  Предел Взвешивания, г",
					types: [
						"0,220",
						"1",
						"2",
						"10",
						"100",
						"1000",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "рН-метры",
			fields: [
				{
					name: "Дискретность",
					types: [
						"0,01",
						"0,1",
						"1",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Дополнительно",
					types: [
						"Датчик температуры",
						"Датчик электропроводности",
						"Датчик растворенного кислораода",
						"Измерение общей минерализации",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Термостат",
			fields: [
				{
					name: "Минимальная температура, оС",
					types: [
						"-5",
						"-1",
						"0",
						"1",
						"5",
						"10",
						"15",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Максимальная температура, оС",
					types: [
						"50",
						"80",
						"100",
						"200",
						"15",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Сушильный шкаф",
			fields: [
				{
					name: "Максимальная температура, оС",
					types: [
						"100",
						"150",
						"200",
						"400",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Объем, л",
					types: [
						"10",
						"20",
						"40",
						"80",
						"100",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Муфельная печь",
			fields: [
				{
					name: "Максимальная температура, оС",
					types: [
						"400",
						"500",
						"600",
						"800",
						"1000",
						"1200",
						"2000",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Объем, л",
					types: [
						"5",
						"10",
						"20",
						"30",
						"40",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Бидистиллятор",
			fields: [
				{
					name: "Производительность, л/ч",
					types: [
						"1",
						"2",
						"4",
						"10",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Электропитание, В",
					types: [
						"230",
						"400",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Дистиллятор",
			fields: [
				{
					name: "Производительность, л/ч",
					types: [
						"2",
						"5",
						"10",
						"25",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Электропитание, В",
					types: [
						"230",
						"400",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Нагревающая плитка",
			fields: [
				{
					name: "Максимальная температура нагрева, оС",
					types: [
						"200",
						"300",
						"400",
						"500",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Количество мест",
					types: [
						"1",
						"2",
						"3",
						"4",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Магнитная мешалка",
			fields: [
				{
					name: "Максимальная температура нагрева, оС",
					types: [
						"100",
						"150",
						"200",
						"300",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Диапазон вращающего момента, об/мин",
					types: [
						"500",
						"1000",
						"2000",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Роторный испаритель",
			fields: [
				{
					name: "Максимальная температура нагрева, оС",
					types: [
						"100",
						"150",
						"180",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Диапазон вращающего момента, об/мин",
					types: [
						"100",
						"150",
						"250",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Центрифуга",
			fields: [
				{
					name: "Вместимость, шт",
					types: [
						"4",
						"6",
						"8",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Диапазон вращающего момента, об/мин",
					types: [
						"3000",
						"6000",
						"10000",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Водяная баня",
			fields: [
				{
					name: "Количество мест",
					types: [
						"1",
						"4",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Объем, л",
					types: [
						"10",
						"20",
						"40",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Холодильник",
			fields: [
				{
					name: "Минимальная температура, оС",
					types: [
						"-5",
						"-2",
						"0",
						"5",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Объем, л",
					types: [
						"500",
						"1000",
						"1200",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Микроскоп",
			fields: [
				{
					name: "Увеличение",
					types: [
						"500",
						"1000",
						"2000",
						"5000",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Методы контрастирования",
					types: [
						"Светлое поле",
						"Темное поле",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Газоанализатор",
			fields: [
				{
					name: "Объект исследования",
					types: [
						"Атмосферный воздух",
						"Воздух рабочей зоны",
						"Промышленные выбросы",
						CUSTOM_VARIANT
					]
				},
				{
					name: "Определяемые вещества",
					types: [
						"Пыль",
						"Продукты горения (CO, NO, NO2,SO2)",
						"Углеводороды",
						"Все выше перечисленные",
						CUSTOM_VARIANT
					]
				}
			]
		},
		{
			name: "Другое оборудование",
			fields: null
		}
	];

	//document.querySelector('select[name="type"]').addEventListener("change", changeEvent);

	function changeEvent(event) {

		let fields = document.getElementById(event.target.dataset.blockid).querySelector("table[data-fields]");
		while (fields.hasChildNodes()) {
			fields.removeChild(fields.firstChild);
		}

		var selectedOption = $(event.target).find('option:selected')[0];
		var optionIndex = $(selectedOption).attr('data-index');

		var id = $(event.target).attr('data-id');

		if(typeof detectors[optionIndex].fields !== 'undefined' && detectors[optionIndex].fields != null) {

			let tr1 = document.createElement("tr");
			let tr2 = document.createElement("tr");

			detectors[optionIndex].fields.forEach( function(item, index) {
				let th1 = document.createElement("th");
				th1.innerHTML = item.name;
				tr1.appendChild(th1);
				fields.appendChild(tr1);

				let td2       = document.createElement("td");
				let td2select = document.createElement("select");

                //let td4;
               // td4.innerHTML += "<input type=\"text\" name=\"variant[]\" class='' =\"variant\" placeholder=\""+ +"\" />";


				if(typeof item.types !== 'undefined' && item.types != null) {
					item.types.forEach(function(item, index) {
						let option = document.createElement("option");
						option.setAttribute('value', item);
						option.innerHTML = item;
						td2select.appendChild(option);
                        //td4.appendChild(option);
                       // td2select.addEventListener("change", SelChan3(this));
					});
                  //  td2select.addEventListener("change", SelChan3(this));
			 	}
                //td2select.addEventListener("change", SelChan3(this));

				td2.appendChild(td2select);
                //td2select.addEventListener("change", SelChan3(this));

				td2.innerHTML += "<input type=\"text\" name=\"item[" + id + "][custom_variant]\"id=\"item_com_" + id + "\" class=\"item_com_" + id + "\"placeholder=\"" + CUSTOM_VARIANT + "\" />";
				tr2.appendChild(td2);
				fields.appendChild(tr1);
				fields.appendChild(tr2);

				var selectElement = $(td2).find('select');
				//alert(selectElement);
                selectElement.attr('name', 'item[' + id + '][detector][]');

                //selectElement.addEventListener("change", SelChan3(this));


				var name = detectors[optionIndex].name;
				if ((name=="Хроматограф газовый")||(name=="Хроматограф жидкостной")) {
					selectElement.attr('multiple', 'multiple');
				}
				selectElement.select2();
			});
		} else {
			let tr1 = document.createElement("tr");
			let tr2 = document.createElement("tr");

			let th1 = document.createElement("th");
			th1.innerHTML = "Наименование";
			tr1.appendChild(th1);

			let th2 = document.createElement("th");
			th2.innerHTML = "описание";
			tr1.appendChild(th2);
			fields.appendChild(tr1);

			let td1 = document.createElement("td");
			td1.innerHTML = "<input type=\"text\" name=\"item[" + id + "][custom_name]\"id=\"item_com_" + id + "\" class=\"item_com_" + id + "\" placeholder=\"Наименование\" class=\"comment\"/>";
			tr2.appendChild(td1);

			let td2 = document.createElement("td");
			td2.innerHTML = "<input type=\"text\" name=\"item[" + id + "][custom_description]\" id=\"item_com_" + id + "\" class=\"item_desc_" + id + "\" placeholder=\"описание\" class=\"comment\"/>";
			tr2.appendChild(td2);
			fields.appendChild(tr2);


		}



	}

	//document.getElementById("add_item").addEventListener("click", createClone); 

	var item_id_counter = 0;

	function createClone(el) {
		if (el !== undefined) {
			el.preventDefault();
		}
		var one_block = document.getElementById("one_block_example").cloneNode(true);

		one_block.setAttribute('id', 'item_' + item_id_counter);
		one_block.querySelectorAll('*[data-blockid]').forEach(function(item) {
			item.setAttribute('data-blockid', 'item_' + item_id_counter);
		});
		one_block.style = "display: block;";
		let button = one_block.querySelector("input[data-add]");
		button.setAttribute('data-blockid', 'item_' + item_id_counter);

		button.addEventListener("click", createClone);
		let type = one_block.querySelector("select[data-type]");

		type.innerHTML = "";

		detectors.forEach(function(item, index) {
			 let option = document.createElement("option");
			 option.setAttribute('value', item.name);
			 option.setAttribute('data-index', index);
			 option.innerHTML = item.name;
			 type.appendChild(option);
		});
		$(type).attr('data-id', item_id_counter);
		type.addEventListener("change", changeEvent);


		document.getElementById("po5t").appendChild( one_block );

		$(one_block).find('.pname').attr('name', 'item[' + item_id_counter + '][type]');
		$(one_block).find('.chk_register').attr('name', 'item[' + item_id_counter + '][chk_register]');
		$(one_block).find('.chk_new').attr('name', 'item[' + item_id_counter + '][chk_new]');
		$(one_block).find('.comment').attr('name', 'item[' + item_id_counter + '][comment]');
        $(one_block).find('.comment').attr('id', 'item' + item_id_counter);

		item_id_counter++;
	}
    //===== Удаление текущей  записи    =====//
    function DelUvv(element) {

       var sss= $(element).parents('.one_block');
      //  var sss= $(element);

        sss.remove();

    }

    function SelChan2(element) {
        var str2='';
        names = $(element).find('option:selected').text();
        str2=names;
       var inp_type=$(element).parents('.one_block').find('.type_dev');
       // console.log(inp_type);
        //$(inp_type).val(str2);

    }

    function SelChan3(element) {

	  //  alert(2222);
        var str2='';
        names = $(element).find('option:selected').text();
        str2=names;
        var inp_type=$(element).parents('.one_block').find('.type_dev');
        // console.log(inp_type);
       // $(inp_type).val(str2);

    }


    $('#popu1').click(function () {

        var line;
        line='';

       var j= item_id_counter;

        for  (var i = 0; i < j; i++) {

            var k = i+1;


            line = line + '\r\n'+'Устройство № ' + k;
             // alert(line);

            var vitem = 'item_' + i;


            var inp_type = $('#' + vitem).find('.pname');

            var names_type = $(inp_type).find('option:selected').text();

            //alert(names_type);

            line = line + '\r\n' + 'Тип устройства: ' + names_type;

            //alert(line);

            var vitem2 = 'item' + i;
            var names_com2 = document.getElementById(vitem2).value;

            line = line + '\r\n' + "Комментарий к устройству: " + names_com2;

            if (names_type =="Другое оборудование") {

                var opt_com = 'item_com_' + i;
                var opt_com1 = document.getElementsByClassName(opt_com)[0].value;
                line = line + '\r\n' + "Наименование: " + opt_com1;
                alert(opt_com1);

                var opt_com_desc = 'item_desc_' + i;
                var pt_com_desc1 = document.getElementsByClassName(opt_com_desc)[0].value;
                line = line + '\r\n' + "Описание: " + pt_com_desc1;
                //alert(opt_com1);



            }



            //если єлементов больше 1

            var leng_opt=0;
            leng_opt = $('#' + vitem).find('.select2-hidden-accessible').length;
            //alert(leng_opt);

            if (leng_opt > 1) {

               // alert(2)
                var inp_opt = $('#' + vitem).find('.select2-hidden-accessible')[0];

                var names_opt1 = $(inp_opt).find('option:selected').text();

                line = line + '\r\n' + "Дополнительная опция 1: " + names_opt1;

                //alert(names_opt1);

                // line=line+'\r\n'+"Дополнительные опции: " +names_opt;


                var opt_com = 'item_com_' + i;

                //var opt_com1= document.getElementById(opt_com).value;

                var opt_com1 = document.getElementsByClassName(opt_com)[0].value;
                line = line + '\r\n' + "Комментарий к доп опции 1: " + opt_com1;
                //alert(opt_com1);

                var inp_opt = $('#' + vitem).find('.select2-hidden-accessible')[1];

                var names_opt1 = $(inp_opt).find('option:selected').text();
                line = line + '\r\n' + "Дополнительная опция 2: " + names_opt1;

                //alert(names_opt1);

                // line=line+'\r\n'+"Дополнительные опции: " +names_opt;


                var opt_com = 'item_com_' + i;
                var opt_com1 = document.getElementsByClassName(opt_com)[1].value;
                // alert(opt_com1);
                line = line + '\r\n' + "Комментарий к доп опции 2: " + opt_com1;


            }
            if (leng_opt == 1) {
                 //alert(1)

                var inp_opt = $('#' + vitem).find('.select2-hidden-accessible');

                var names_opt = $(inp_opt).find('option:selected').text();

                //alert(names_opt);

                line = line + '\r\n' + "Дополнительная опция: " + names_opt;


                var opt_com = 'item_com_' + i;
                var opt_com1 = document.getElementsByClassName(opt_com)[0].value;
               // alert(opt_com1);
                line = line + '\r\n' + "Комментарий к доп опции: " + opt_com1;
            }
            if (leng_opt == 0) {
               // alert(0);
            }


            line = line + '\r\n' + "=============================" ;

        }

        document.getElementById("texta").value = line;

        //alert(line);

        //========================//

//        $('#type_v_0').val(names_type);
//        $('#type_com_0').val(names_com2);
//        $('#type_opt_0').val(names_opt);
//        $('#type_opt_com_0').val(opt_com1);

        //type_opt_com_0




    });






    window.DelUvv = DelUvv;
    window.SelChan2 = SelChan2;

	createClone();
//   changeEvent(el);
</script>

<script>
//   / * dm-modal.js v1.2
//    *
//    * Надёжный и функциональный плагин jQuery для вывода
//    * модальных(всплывающих окон) на страницах сайтов;
//    * возможность подключения в работу сразу нескольких модальных
//    * блоков на одной странице, размер окон устанавливается непосредственно
//    * в href атрибуте ссылок на вызов;
//    *


    $(document).ready(function(){
        //При нажатии на ссылку с классом poplight и href атрибута тега <a> с #
        $('#popu1').click(function() {
            //  alert(22);
            var popID = $(this).attr('rel'); //получаем имя окна, важно не забывать при добавлении новых менять имя в атрибуте rel ссылки
            var popURL = $(this).attr('href'); //получаем размер из href атрибута ссылки

            //запрос и переменные из href url
            var query= popURL.split('?');
            var dim= query[1].split('&');
            var popWidth = dim[0].split('=')[1]; //первое значение строки запроса

            //Fade in the Popup and add close button
            $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" title="Закрыть" class="close"></a>');

            //Определяем маржу(запас) для выравнивания по центру (по вертикали и горизонтали) - мы добавляем 80 к высоте / ширине с учетом отступов + ширина рамки определённые в css
            var popMargTop = ($('#' + popID).height() + 80) / 2;
            var popMargLeft = ($('#' + popID).width() + 80) / 2;

            //Устанавливаем величину отступа
            $('#' + popID).css({
                'margin-top' : -popMargTop,
                'margin-left' : -popMargLeft
            });

            //Добавляем полупрозрачный фон затемнения
            $('body').append('<div id="fade"></div>'); //div контейнер будет прописан перед тегом </body>.
            $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //полупрозрачность слоя, фильтр для тупого IE

            return false;
        });

        //Закрываем окно и фон затемнения
        $(document).on('click', 'a.close, #fade', function() { //закрытие по клику вне окна, т.е. по фону...
            $('#fade , .popup_block').fadeOut(function() {
                $('#fade, a.close').remove();  //плавно исчезают
            });
            return false;
        });

    });

</script>







</body>
</html>